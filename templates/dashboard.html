{% extends "base.html" %}
{% block title %}Painel — Boletim{% endblock %}
{% block content %}
<div class="row">
  <div class="col-lg-12">
    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h2 class="h5 mb-3">Demonstração IDOR</h2>
        <p class="mb-2">Este app tem duas formas de visualizar notas:</p>
        <ul>
          <li><strong>Vulnerável:</strong> <code>/notas/&lt;aluno_id&gt;</code> — troca o ID na URL e tente acessar notas de outro aluno.</li>
          <li><strong>Segura:</strong> <code>/minhas-notas</code> — retorna apenas as suas notas (validação por sessão).</li>
        </ul>
        <div class="alert alert-warning">
          Estado atual: <strong>{{ 'VULNERÁVEL' if current_app.config['VULNERABLE'] else 'SEGURO' }}</strong>.
          (Ajuste em <code>app.py</code>)
        </div>
        <ul class="list-group-flush">
          <h3 class="h5 mb-3">Rotas vulneráveis:</h3>
          <li class="list-group-item">
            <a class="btn btn-outline-primary me-2" href="{{ url_for('minhas_notas') }}">Ver minhas notas (seguro)</a>
            <a class="btn btn-outline-primary me-2" href="{{ url_for('meus_dados') }}">
              Meus dados (seguro)
            </a>
          </li>
          <h3 class="h5 mt-3 mb-3">Rotas Seguras:</h3>
          <li class="list-group-item">
            <a class="btn btn-outline-danger me-2" href="{{ url_for('notas_aluno', aluno_id=session['user_id']) }}">Acessar via notas (vulnerável)</a>
            <a class="btn btn-outline-danger" href="{{ url_for('dados_pessoais', aluno_id=session['user_id']) }}">
              Ver meus dados (via ID na URL)
            </a>
          </li>
        </ul>
      
      </div>
    </div>
  </div>
</div>
{% endblock %}
